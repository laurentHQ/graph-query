{
    "nodes": [
      {
        "id": "workflow_ingestion",
        "type": "Workflow",
        "label": "Result Ingestion Flow",
        "description": "End-to-end flow for accepting bulk extraction results, ensuring uniqueness, and persisting data.",
        "inferred": false
      },
      {
        "id": "workflow_monitoring",
        "type": "Workflow",
        "label": "Live Monitoring Flow",
        "description": "Real-time subscription flow where downstream clients receive updates immediately upon data ingestion.",
        "inferred": false
      },
      {
        "id": "workflow_retrieval",
        "type": "Workflow",
        "label": "Result Retrieval Flow",
        "description": "Fetching stored results via ID lookup or paginated listing for UI/Analytics display.",
        "inferred": false
      },
      {
        "id": "concept_reliability",
        "type": "Concept",
        "label": "Distributed Reliability",
        "description": "Ensures the system handles network retries and duplicate requests without side effects (Idempotency).",
        "inferred": false
      },
      {
        "id": "concept_schema_flexibility",
        "type": "Concept",
        "label": "Schema Agnosticism",
        "description": "The ability to store diverse document templates without rigid database schema migrations.",
        "inferred": false
      },
      {
        "id": "concept_reactivity",
        "type": "Concept",
        "label": "Event-Driven Reactivity",
        "description": "Pushing state changes to clients instantly to avoid inefficient polling overhead.",
        "inferred": false
      },
      {
        "id": "tech_endpoint_post",
        "type": "Function",
        "label": "POST /v1/results",
        "file": "src/index.ts",
        "line": 45,
        "description": "API entry point for bulk result ingestion.",
        "inferred": false
      },
      {
        "id": "tech_idempotency_check",
        "type": "Function",
        "label": "cache.get / cache.set",
        "file": "src/cache.ts",
        "line": 29,
        "description": "Redis logic to check for existing request keys and store successful responses.",
        "inferred": false
      },
      {
        "id": "tech_db_upsert",
        "type": "Function",
        "label": "db.upsert",
        "file": "src/db.ts",
        "line": 16,
        "description": "Executes PostgreSQL INSERT ON CONFLICT DO UPDATE.",
        "inferred": false
      },
      {
        "id": "tech_jsonb_storage",
        "type": "DatabaseTable",
        "label": "Table: results (JSONB)",
        "file": "migrations/001_init.sql",
        "line": 8,
        "description": "Denormalized table structure using JSONB data column.",
        "inferred": false
      },
      {
        "id": "tech_sse_manager",
        "type": "Class",
        "label": "SSEManager",
        "file": "src/sse.ts",
        "line": 8,
        "description": "Singleton class managing active server-sent event connections and broadcasting.",
        "inferred": false
      },
      {
        "id": "tech_endpoint_stream",
        "type": "Function",
        "label": "GET /v1/results/stream",
        "file": "src/index.ts",
        "line": 133,
        "description": "Endpoint that registers new clients with the SSEManager.",
        "inferred": false
      },
      {
        "id": "tech_endpoint_get",
        "type": "Function",
        "label": "GET /v1/results/:case_id",
        "file": "src/index.ts",
        "line": 84,
        "description": "API entry point for fetching a single result.",
        "inferred": false
      }
    ],
    "edges": [
      {
        "source": "workflow_ingestion",
        "target": "concept_reliability",
        "type": "includes",
        "layer": "workflow-to-conceptual"
      },
      {
        "source": "workflow_ingestion",
        "target": "concept_schema_flexibility",
        "type": "leverages",
        "layer": "workflow-to-conceptual"
      },
      {
        "source": "workflow_monitoring",
        "target": "concept_reactivity",
        "type": "includes",
        "layer": "workflow-to-conceptual"
      },
      {
        "source": "workflow_retrieval",
        "target": "concept_schema_flexibility",
        "type": "accesses",
        "layer": "workflow-to-conceptual"
      },
      {
        "source": "concept_reliability",
        "target": "tech_idempotency_check",
        "type": "implemented_by",
        "layer": "conceptual-to-technical"
      },
      {
        "source": "concept_schema_flexibility",
        "target": "tech_jsonb_storage",
        "type": "enabled_by",
        "layer": "conceptual-to-technical"
      },
      {
        "source": "concept_reactivity",
        "target": "tech_sse_manager",
        "type": "managed_by",
        "layer": "conceptual-to-technical"
      },
      {
        "source": "tech_endpoint_post",
        "target": "tech_idempotency_check",
        "type": "calls",
        "layer": "technical"
      },
      {
        "source": "tech_endpoint_post",
        "target": "tech_db_upsert",
        "type": "calls",
        "layer": "technical"
      },
      {
        "source": "tech_db_upsert",
        "target": "tech_jsonb_storage",
        "type": "writes_to",
        "layer": "technical"
      },
      {
        "source": "tech_endpoint_post",
        "target": "tech_sse_manager",
        "type": "triggers_broadcast",
        "layer": "technical"
      },
      {
        "source": "tech_endpoint_stream",
        "target": "tech_sse_manager",
        "type": "registers_connection",
        "layer": "technical"
      },
      {
        "source": "tech_endpoint_get",
        "target": "tech_jsonb_storage",
        "type": "reads_from",
        "layer": "technical"
      }
    ],
    "layers": {
      "workflow": [
        "workflow_ingestion",
        "workflow_monitoring",
        "workflow_retrieval"
      ],
      "conceptual": [
        "concept_reliability",
        "concept_schema_flexibility",
        "concept_reactivity"
      ],
      "technical": [
        "tech_endpoint_post",
        "tech_idempotency_check",
        "tech_db_upsert",
        "tech_jsonb_storage",
        "tech_sse_manager",
        "tech_endpoint_stream",
        "tech_endpoint_get"
      ]
    }
  }