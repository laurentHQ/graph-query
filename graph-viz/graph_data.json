{
  "nodes": [
    {
      "id": "workflow_case_orchestration",
      "type": "Workflow",
      "label": "Case Orchestration Workflow",
      "description": "End-to-end document processing workflow: Lock acquisition → OCR (with filesystem text retrieval) → Extraction (with V2 template support) → Optional Review → Results Export. Includes signal-based webhook handling, PostgreSQL advisory locking, and idempotency.",
      "inferred": false
    },
    {
      "id": "workflow_sync_dossiers",
      "type": "Workflow",
      "label": "Sync External Dossiers Workflow",
      "description": "Batch workflow that fetches external dossiers from Beedu API (pagination or specific case codes), syncs metadata and files, tracks per-document extraction status, optionally launches case workflows, handles OCR PDF upload, and delivers batched webhooks with replay support.",
      "inferred": false
    },
    {
      "id": "workflow_webhook_handling",
      "type": "Workflow",
      "label": "Webhook Signal Handling",
      "description": "CloudEvents webhook reception from external services (OCR, Extraction) with signature validation, enrichment (OCR text retrieval from filesystem), and workflow signaling pattern.",
      "inferred": false
    },
    {
      "id": "concept_case_management",
      "type": "Concept",
      "label": "Case Management",
      "description": "Handles case creation, state transitions (PENDING → IN_PROGRESS → COMPLETED/FAILED), status tracking, and per-document extraction status updates in case-service.",
      "inferred": false
    },
    {
      "id": "concept_ocr_processing",
      "type": "Concept",
      "label": "OCR Processing",
      "description": "Manages OCR job submission to external service, filesystem-based text retrieval (reads .txt files from shared directory), per-page text extraction, empty content handling with filename pattern matching, and enriched webhook data.",
      "inferred": false
    },
    {
      "id": "concept_extraction",
      "type": "Concept",
      "label": "Field Extraction",
      "description": "Coordinates extraction job submission with LLM configuration (provider, model, temperature), V2 template system with automatic document type detection (court_dan_su, court_hinh_su), processing modes (turbo, balanced, comprehensive), and quality assessment.",
      "inferred": false
    },
    {
      "id": "concept_review_management",
      "type": "Concept",
      "label": "Human Review Management",
      "description": "Manages quality-based review trigger logic (coverage threshold, low confidence fields, critical warnings), review UI notification, and review completion signal handling with field corrections.",
      "inferred": false
    },
    {
      "id": "concept_results_export",
      "type": "Concept",
      "label": "Results Export",
      "description": "Handles results transformation and delivery to Results Service with metadata enrichment (document_type, case_type, original_case_code), quality metrics mapping, and failure handling.",
      "inferred": false
    },
    {
      "id": "concept_beedu_sync",
      "type": "Concept",
      "label": "Beedu Synchronization",
      "description": "Domain logic for syncing external dossiers and files from Beedu system, including pagination, search by case codes, metadata persistence, and sync status tracking.",
      "inferred": false
    },
    {
      "id": "concept_webhook_delivery",
      "type": "Concept",
      "label": "Webhook Delivery",
      "description": "Manages CloudEvents webhook delivery with HMAC signature validation, timestamp verification, payload batching, replay support, and delivered flag tracking to prevent duplicate delivery.",
      "inferred": false
    },
    {
      "id": "concept_lock_management",
      "type": "Concept",
      "label": "Concurrency Control",
      "description": "PostgreSQL advisory lock management for case-level exclusive access, Redis-based ownership tracking with TTL, and lock release before long waits (e.g., review phase).",
      "inferred": false
    },
    {
      "id": "concept_idempotency",
      "type": "Concept",
      "label": "Idempotency",
      "description": "Redis-based idempotency key management for activities (OCR job, extraction job, results delivery) to ensure exactly-once semantics during retries.",
      "inferred": false
    },
    {
      "id": "concept_ocr_pdf_upload",
      "type": "Concept",
      "label": "OCR PDF Upload",
      "description": "Uploads OCR result PDFs back to external Beedu system after extraction completes, with dry-run mode support, file path reconstruction, and upload verification.",
      "inferred": false
    },
    {
      "id": "concept_status_tracking",
      "type": "Concept",
      "label": "Document Status Tracking",
      "description": "Tracks per-document extraction lifecycle in case-service database (pending → ocr_in_progress → extraction_in_progress → completed/failed) with quality metrics, error codes, and metadata.",
      "inferred": false
    },
    {
      "id": "concept_document_type_resolution",
      "type": "Concept",
      "label": "Document Type Resolution",
      "description": "Resolves document type (court_dan_su, court_hinh_su) and case type from extraction result metadata, workflow options, or dossier metadata for template selection and results enrichment.",
      "inferred": false
    },
    {
      "id": "service_orchestrator",
      "type": "Service",
      "technical_level": "service",
      "label": "Orchestrator Service",
      "description": "Main orchestration service hosting Temporal worker, Express API server, and middleware infrastructure. Modes: worker-only, server-only, or both.",
      "inferred": false
    },
    {
      "id": "module_temporal_workflows",
      "type": "Module",
      "technical_level": "module",
      "label": "temporal/workflows",
      "path": "src/temporal/workflows",
      "description": "Temporal workflow definitions for case orchestration and dossier synchronization.",
      "inferred": false
    },
    {
      "id": "module_temporal_activities",
      "type": "Module",
      "technical_level": "module",
      "label": "temporal/activities",
      "path": "src/temporal/activities",
      "description": "General Temporal activities for OCR, extraction, review, results, lock management, case management, metrics, and webhooks.",
      "inferred": false
    },
    {
      "id": "module_beedu_activities",
      "type": "Module",
      "technical_level": "module",
      "label": "temporal/beedu-activities",
      "path": "src/temporal/beedu-activities",
      "description": "Beedu-specific integration activities for dossier fetching, file fetching, metadata storage, status sync, OCR PDF upload, and extraction workflow launching.",
      "inferred": false
    },
    {
      "id": "module_routes",
      "type": "Module",
      "technical_level": "module",
      "label": "routes",
      "path": "src/routes",
      "description": "Express route handlers for workflow lifecycle, webhooks, health checks, and SSE events.",
      "inferred": false
    },
    {
      "id": "module_middleware",
      "type": "Module",
      "technical_level": "module",
      "label": "middleware",
      "path": "src/middleware",
      "description": "Express middleware for request validation (OpenAPI schemas), dependency injection (Temporal client, Redis), and error handling.",
      "inferred": false
    },
    {
      "id": "module_config",
      "type": "Module",
      "technical_level": "module",
      "label": "config",
      "path": "src/config",
      "description": "Configuration modules for database (PostgreSQL), Redis, service URLs, and environment loading with production overrides.",
      "inferred": false
    },
    {
      "id": "module_clients",
      "type": "Module",
      "technical_level": "module",
      "label": "temporal/clients",
      "path": "src/temporal/clients",
      "description": "Generated TypeScript clients from OpenAPI specs for external services (Case, OCR, Extraction, Results, Beedu).",
      "inferred": false
    },
    {
      "id": "module_utils",
      "type": "Module",
      "technical_level": "module",
      "label": "temporal/utils",
      "path": "src/temporal/utils",
      "description": "Utility modules for OCR text retrieval (filesystem and URL), document type resolution, and filename filtering.",
      "inferred": false
    },
    {
      "id": "module_worker",
      "type": "Module",
      "technical_level": "module",
      "label": "temporal/worker",
      "path": "src/temporal/worker",
      "description": "Temporal worker initialization and Express server setup.",
      "inferred": false
    },
    {
      "id": "module_cron",
      "type": "Module",
      "technical_level": "module",
      "label": "cron_job",
      "path": "cron_job",
      "description": "Cron job scripts for scheduled dossier synchronization with management utilities.",
      "inferred": false
    },
    {
      "id": "file_case_orchestration_ts",
      "type": "File",
      "technical_level": "file",
      "label": "case-orchestration.ts",
      "file": "src/temporal/workflows/case-orchestration.ts",
      "description": "Main case orchestration workflow implementation with signal handlers, OCR/extraction phases, review logic, results export, and failure handling.",
      "inferred": false
    },
    {
      "id": "file_sync_dossiers_ts",
      "type": "File",
      "technical_level": "file",
      "label": "sync-dossiers.ts",
      "file": "src/temporal/workflows/sync-dossiers.ts",
      "description": "Batch dossier synchronization workflow with pagination, per-dossier processing, auto-launch orchestration, OCR PDF upload, and batched webhook delivery.",
      "inferred": false
    },
    {
      "id": "file_ocr_ts",
      "type": "File",
      "technical_level": "file",
      "label": "activities/ocr.ts",
      "file": "src/temporal/activities/ocr.ts",
      "description": "OCR activity implementations: job creation, result retrieval with text enrichment.",
      "inferred": false
    },
    {
      "id": "file_extraction_ts",
      "type": "File",
      "technical_level": "file",
      "label": "activities/extraction.ts",
      "file": "src/temporal/activities/extraction.ts",
      "description": "Extraction activity implementations: job creation with LLM config, V2 template options, and health checks.",
      "inferred": false
    },
    {
      "id": "file_review_ts",
      "type": "File",
      "technical_level": "file",
      "label": "activities/review.ts",
      "file": "src/temporal/activities/review.ts",
      "description": "Review notification activity to Review UI with Redis pub/sub.",
      "inferred": false
    },
    {
      "id": "file_results_ts",
      "type": "File",
      "technical_level": "file",
      "label": "activities/results.ts",
      "file": "src/temporal/activities/results.ts",
      "description": "Results handling activities: send results to Results Service with document/case type enrichment, transform extraction to results format, export final results.",
      "inferred": false
    },
    {
      "id": "file_lock_management_ts",
      "type": "File",
      "technical_level": "file",
      "label": "activities/lock-management.ts",
      "file": "src/temporal/activities/lock-management.ts",
      "description": "Lock management activities using PostgreSQL advisory locks and Redis ownership tracking.",
      "inferred": false
    },
    {
      "id": "file_case_management_ts",
      "type": "File",
      "technical_level": "file",
      "label": "activities/case-management.ts",
      "file": "src/temporal/activities/case-management.ts",
      "description": "Case state management activities: update case state, update document extraction status with per-document tracking, fetch OCR result for replay.",
      "inferred": false
    },
    {
      "id": "file_metrics_ts",
      "type": "File",
      "technical_level": "file",
      "label": "activities/metrics.ts",
      "file": "src/temporal/activities/metrics.ts",
      "description": "Metrics recording activity for workflow telemetry.",
      "inferred": false
    },
    {
      "id": "file_webhooks_activity_ts",
      "type": "File",
      "technical_level": "file",
      "label": "activities/webhooks.ts",
      "file": "src/temporal/activities/webhooks.ts",
      "description": "Webhook delivery activities: build batched payload, send with HMAC signature, mark as delivered.",
      "inferred": false
    },
    {
      "id": "file_pdf_verification_ts",
      "type": "File",
      "technical_level": "file",
      "label": "activities/pdf-verification.ts",
      "file": "src/temporal/activities/pdf-verification.ts",
      "description": "PDF file verification activity to validate PDF URLs before processing.",
      "inferred": false
    },
    {
      "id": "file_ocr_pdf_upload_ts",
      "type": "File",
      "technical_level": "file",
      "label": "activities/ocr-pdf-upload.ts",
      "file": "src/temporal/activities/ocr-pdf-upload.ts",
      "description": "OCR PDF upload activity to upload OCR results back to Beedu system.",
      "inferred": false
    },
    {
      "id": "file_job_health_ts",
      "type": "File",
      "technical_level": "file",
      "label": "activities/job-health.ts",
      "file": "src/temporal/activities/job-health.ts",
      "description": "Job health check activity to monitor external job status.",
      "inferred": false
    },
    {
      "id": "file_fetch_dossiers_ts",
      "type": "File",
      "technical_level": "file",
      "label": "beedu-activities/fetch-dossiers.ts",
      "file": "src/temporal/beedu-activities/fetch-dossiers.ts",
      "description": "Dossier fetching activities: list dossiers with pagination or search by case codes.",
      "inferred": false
    },
    {
      "id": "file_fetch_files_ts",
      "type": "File",
      "technical_level": "file",
      "label": "beedu-activities/fetch-files.ts",
      "file": "src/temporal/beedu-activities/fetch-files.ts",
      "description": "File fetching activity to retrieve files for a dossier from Beedu.",
      "inferred": false
    },
    {
      "id": "file_store_metadata_ts",
      "type": "File",
      "technical_level": "file",
      "label": "beedu-activities/store-metadata.ts",
      "file": "src/temporal/beedu-activities/store-metadata.ts",
      "description": "Metadata storage activity to persist dossier/file metadata to case-service.",
      "inferred": false
    },
    {
      "id": "file_sync_status_ts",
      "type": "File",
      "technical_level": "file",
      "label": "beedu-activities/sync-status.ts",
      "file": "src/temporal/beedu-activities/sync-status.ts",
      "description": "Sync status activity to update dossier sync status.",
      "inferred": false
    },
    {
      "id": "file_extraction_workflow_ts",
      "type": "File",
      "technical_level": "file",
      "label": "beedu-activities/extraction-workflow.ts",
      "file": "src/temporal/beedu-activities/extraction-workflow.ts",
      "description": "Extraction workflow launching activity to start case orchestration workflows.",
      "inferred": false
    },
    {
      "id": "file_case_operations_ts",
      "type": "File",
      "technical_level": "file",
      "label": "beedu-activities/case-operations.ts",
      "file": "src/temporal/beedu-activities/case-operations.ts",
      "description": "Case operations activities: initialize document tracking, fetch workflow params, check document status.",
      "inferred": false
    },
    {
      "id": "file_upload_file_ts",
      "type": "File",
      "technical_level": "file",
      "label": "beedu-activities/upload-file.ts",
      "file": "src/temporal/beedu-activities/upload-file.ts",
      "description": "File upload activity to upload OCR PDFs to Beedu.",
      "inferred": false
    },
    {
      "id": "file_document_tracking_ts",
      "type": "File",
      "technical_level": "file",
      "label": "beedu-activities/document-tracking.ts",
      "file": "src/temporal/beedu-activities/document-tracking.ts",
      "description": "Document tracking activity to track per-document extraction status.",
      "inferred": false
    },
    {
      "id": "file_workflows_route_ts",
      "type": "File",
      "technical_level": "file",
      "label": "routes/workflows.ts",
      "file": "src/routes/workflows.ts",
      "description": "Workflow lifecycle API routes: start workflow (POST /start), get status (GET /:id), list workflows (GET /), cancel workflow (POST /:id/cancel), terminate workflow (POST /:id/terminate).",
      "inferred": false
    },
    {
      "id": "file_webhooks_route_ts",
      "type": "File",
      "technical_level": "file",
      "label": "routes/webhooks.ts",
      "file": "src/routes/webhooks.ts",
      "description": "Webhook receiver routes: OCR webhook (POST /webhooks/ocr with text enrichment), Extraction webhook (POST /webhooks/extraction), list received webhooks (GET /webhooks/received).",
      "inferred": false
    },
    {
      "id": "file_health_route_ts",
      "type": "File",
      "technical_level": "file",
      "label": "routes/health.ts",
      "file": "src/routes/health.ts",
      "description": "Health check routes: basic health (GET /health), readiness probe (GET /ready), comprehensive readiness with all services (GET /ready/complete).",
      "inferred": false
    },
    {
      "id": "file_review_route_ts",
      "type": "File",
      "technical_level": "file",
      "label": "routes/review.ts",
      "file": "src/routes/review.ts",
      "description": "Review completion route to signal workflow when review is complete.",
      "inferred": false
    },
    {
      "id": "file_events_route_ts",
      "type": "File",
      "technical_level": "file",
      "label": "routes/events.ts",
      "file": "src/routes/events.ts",
      "description": "Server-Sent Events (SSE) stream route for real-time workflow updates via Redis pub/sub.",
      "inferred": false
    },
    {
      "id": "file_formatted_results_route_ts",
      "type": "File",
      "technical_level": "file",
      "label": "routes/formatted-results.ts",
      "file": "src/routes/formatted-results.ts",
      "description": "Formatted results API route for retrieving extraction results with template schemas.",
      "inferred": false
    },
    {
      "id": "file_validation_ts",
      "type": "File",
      "technical_level": "file",
      "label": "middleware/validation.ts",
      "file": "src/middleware/validation.ts",
      "description": "OpenAPI request/response validation middleware using AJV with schema compilation from YAML specs.",
      "inferred": false
    },
    {
      "id": "file_dependencies_ts",
      "type": "File",
      "technical_level": "file",
      "label": "middleware/dependencies.ts",
      "file": "src/middleware/dependencies.ts",
      "description": "Dependency injection middleware to attach Temporal client, Redis, PostgreSQL pool to request context.",
      "inferred": false
    },
    {
      "id": "file_database_config_ts",
      "type": "File",
      "technical_level": "file",
      "label": "config/database.ts",
      "file": "src/config/database.ts",
      "description": "PostgreSQL connection pool configuration.",
      "inferred": false
    },
    {
      "id": "file_redis_config_ts",
      "type": "File",
      "technical_level": "file",
      "label": "config/redis.ts",
      "file": "src/config/redis.ts",
      "description": "Redis client configuration and factory.",
      "inferred": false
    },
    {
      "id": "file_services_config_ts",
      "type": "File",
      "technical_level": "file",
      "label": "config/services.ts",
      "file": "src/config/services.ts",
      "description": "External service URL configuration (Case, OCR, Extraction, Results, Beedu).",
      "inferred": false
    },
    {
      "id": "file_env_loader_ts",
      "type": "File",
      "technical_level": "file",
      "label": "config/env-loader.ts",
      "file": "src/config/env-loader.ts",
      "description": "Smart environment variable loader with production overrides for Beedu credentials.",
      "inferred": false
    },
    {
      "id": "file_generated_clients_ts",
      "type": "File",
      "technical_level": "file",
      "label": "clients/generated.ts",
      "file": "src/temporal/clients/generated.ts",
      "description": "Auto-generated TypeScript client classes from OpenAPI specs for all external services.",
      "inferred": false
    },
    {
      "id": "file_typed_client_ts",
      "type": "File",
      "technical_level": "file",
      "label": "clients/typed-client.ts",
      "file": "src/temporal/clients/typed-client.ts",
      "description": "Base class for type-safe OpenAPI clients with validation and error handling.",
      "inferred": false
    },
    {
      "id": "file_ocr_text_retrieval_ts",
      "type": "File",
      "technical_level": "file",
      "label": "utils/ocr-text-retrieval.ts",
      "file": "src/temporal/utils/ocr-text-retrieval.ts",
      "description": "OCR text retrieval utility to read text files from shared filesystem and enrich webhook data.",
      "inferred": false
    },
    {
      "id": "file_document_type_ts",
      "type": "File",
      "technical_level": "file",
      "label": "utils/document-type.ts",
      "file": "src/temporal/utils/document-type.ts",
      "description": "Document type and case type resolution utility from extraction result metadata.",
      "inferred": false
    },
    {
      "id": "file_filename_filter_ts",
      "type": "File",
      "technical_level": "file",
      "label": "utils/filename-filter.ts",
      "file": "src/temporal/utils/filename-filter.ts",
      "description": "Filename filtering utility for pattern matching (e.g., upload patterns).",
      "inferred": false
    },
    {
      "id": "file_worker_ts",
      "type": "File",
      "technical_level": "file",
      "label": "worker/worker.ts",
      "file": "src/temporal/worker/worker.ts",
      "description": "Temporal worker initialization with workflow and activity registration.",
      "inferred": false
    },
    {
      "id": "file_server_ts",
      "type": "File",
      "technical_level": "file",
      "label": "worker/server.ts",
      "file": "src/temporal/worker/server.ts",
      "description": "Express server setup with routes, middleware, and error handling.",
      "inferred": false
    },
    {
      "id": "file_index_ts",
      "type": "File",
      "technical_level": "file",
      "label": "index.ts",
      "file": "src/index.ts",
      "description": "Main application entry point with environment loading, mode selection (worker, server, both), and graceful shutdown handlers.",
      "inferred": false
    },
    {
      "id": "file_cron_sync_dossiers_sh",
      "type": "File",
      "technical_level": "file",
      "label": "cron-sync-dossiers.sh",
      "file": "cron_job/cron-sync-dossiers.sh",
      "description": "Cron script to trigger dossier synchronization workflow via Temporal CLI.",
      "inferred": false
    },
    {
      "id": "file_manage_cron_sh",
      "type": "File",
      "technical_level": "file",
      "label": "manage-cron.sh",
      "file": "cron_job/manage-cron.sh",
      "description": "Cron job management utility for installing, listing, and removing scheduled jobs.",
      "inferred": false
    },
    {
      "id": "class_GeneratedBeeduOcrClient",
      "type": "Class",
      "technical_level": "class",
      "label": "GeneratedBeeduOcrClient",
      "file": "src/temporal/clients/generated.ts",
      "description": "Generated client class for Beedu OCR API (external integration).",
      "inferred": false
    },
    {
      "id": "class_GeneratedOcrServiceClient",
      "type": "Class",
      "technical_level": "class",
      "label": "GeneratedOcrServiceClient",
      "file": "src/temporal/clients/generated.ts",
      "description": "Generated client class for internal OCR Service API.",
      "inferred": false
    },
    {
      "id": "class_GeneratedExtractionServiceClient",
      "type": "Class",
      "technical_level": "class",
      "label": "GeneratedExtractionServiceClient",
      "file": "src/temporal/clients/generated.ts",
      "description": "Generated client class for Extraction Service API with V2 template support.",
      "inferred": false
    },
    {
      "id": "class_GeneratedResultsServiceClient",
      "type": "Class",
      "technical_level": "class",
      "label": "GeneratedResultsServiceClient",
      "file": "src/temporal/clients/generated.ts",
      "description": "Generated client class for Results Service API.",
      "inferred": false
    },
    {
      "id": "class_GeneratedCaseServiceClient",
      "type": "Class",
      "technical_level": "class",
      "label": "GeneratedCaseServiceClient",
      "file": "src/temporal/clients/generated.ts",
      "description": "Generated client class for Case Service API with document extraction status endpoints.",
      "inferred": false
    },
    {
      "id": "class_TypedOpenAPIClient",
      "type": "Class",
      "technical_level": "class",
      "label": "TypedOpenAPIClient",
      "file": "src/temporal/clients/typed-client.ts",
      "description": "Base class for type-safe OpenAPI clients with validation and error handling.",
      "inferred": false
    },
    {
      "id": "func_CaseOrchestrationWorkflow",
      "type": "Function",
      "technical_level": "function",
      "label": "CaseOrchestrationWorkflow",
      "file": "src/temporal/workflows/case-orchestration.ts",
      "line": 63,
      "importance": "core",
      "entrypoint": true,
      "description": "Main case orchestration workflow function coordinating lock acquisition, OCR (with text enrichment), extraction (with V2 template), optional review, results export, and failure handling. Version: 1.0.2-document-type-metadata.",
      "inferred": false
    },
    {
      "id": "func_startAndAwaitOcr",
      "type": "Function",
      "technical_level": "function",
      "label": "startAndAwaitOcr",
      "file": "src/temporal/workflows/case-orchestration.ts",
      "line": 317,
      "importance": "supporting",
      "description": "Workflow helper: starts OCR job, waits for webhook signal, validates enriched result with text content, handles empty content with filename pattern matching.",
      "inferred": false
    },
    {
      "id": "func_startAndAwaitExtraction",
      "type": "Function",
      "technical_level": "function",
      "label": "startAndAwaitExtraction",
      "file": "src/temporal/workflows/case-orchestration.ts",
      "line": 525,
      "importance": "supporting",
      "description": "Workflow helper: starts extraction job with LLM config and V2 template options, waits for webhook signal, resolves document/case type, handles zero-field failures.",
      "inferred": false
    },
    {
      "id": "func_checkIfReviewNeeded",
      "type": "Function",
      "technical_level": "function",
      "label": "checkIfReviewNeeded",
      "file": "src/temporal/workflows/case-orchestration.ts",
      "line": 829,
      "importance": "supporting",
      "description": "Determines if human review is needed based on quality metrics (coverage threshold, low confidence fields, critical warnings).",
      "inferred": false
    },
    {
      "id": "func_syncExternalDossiersWorkflow",
      "type": "Function",
      "technical_level": "function",
      "label": "syncExternalDossiersWorkflow",
      "file": "src/temporal/workflows/sync-dossiers.ts",
      "line": 170,
      "importance": "core",
      "entrypoint": true,
      "description": "Batch dossier sync workflow: fetches from Beedu (pagination or case codes), persists metadata/files, tracks progress, auto-launches case workflows, handles OCR PDF upload, delivers batched webhooks. Version: 1.0.0-sync-dossiers.",
      "inferred": false
    },
    {
      "id": "func_startOCRJob",
      "type": "Function",
      "technical_level": "function",
      "label": "startOCRJob",
      "file": "src/temporal/activities/ocr.ts",
      "line": 15,
      "importance": "core",
      "description": "Activity: calls OCR service to start a job with callback URL, priority, and idempotency.",
      "inferred": false
    },
    {
      "id": "func_retrieveOCRResults",
      "type": "Function",
      "technical_level": "function",
      "label": "retrieveOCRResults",
      "file": "src/temporal/utils/ocr-text-retrieval.ts",
      "importance": "core",
      "description": "Utility: retrieves OCR text from shared filesystem by reading .txt files, enriches webhook data with text_content and page_texts arrays.",
      "inferred": false
    },
    {
      "id": "func_startExtractionJob",
      "type": "Function",
      "technical_level": "function",
      "label": "startExtractionJob",
      "file": "src/temporal/activities/extraction.ts",
      "line": 12,
      "importance": "core",
      "description": "Activity: calls Extraction service to start a job with LLM config (provider, model, temperature), V2 template options (document_type, detection_confidence), processing mode, and idempotency.",
      "inferred": false
    },
    {
      "id": "func_sendResults",
      "type": "Function",
      "technical_level": "function",
      "label": "sendResults",
      "file": "src/temporal/activities/results.ts",
      "line": 19,
      "importance": "core",
      "description": "Activity: sends extraction results to Results Service with document/case type enrichment, quality metrics, and metadata transformation.",
      "inferred": false
    },
    {
      "id": "func_exportResults",
      "type": "Function",
      "technical_level": "function",
      "label": "exportResults",
      "file": "src/temporal/activities/results.ts",
      "line": 166,
      "importance": "core",
      "description": "Activity: exports final results with field values, quality metrics, and metadata to Results Service and Redis SSE stream.",
      "inferred": false
    },
    {
      "id": "func_notifyReviewRequired",
      "type": "Function",
      "technical_level": "function",
      "label": "notifyReviewRequired",
      "file": "src/temporal/activities/review.ts",
      "line": 12,
      "importance": "core",
      "description": "Activity: notifies Review UI that a case needs human review with extraction result and review URL.",
      "inferred": false
    },
    {
      "id": "func_acquireCaseLock",
      "type": "Function",
      "technical_level": "function",
      "label": "acquireCaseLock",
      "file": "src/temporal/activities/lock-management.ts",
      "line": 11,
      "importance": "core",
      "description": "Activity: acquires PostgreSQL advisory lock for exclusive case access with Redis ownership tracking.",
      "inferred": false
    },
    {
      "id": "func_releaseCaseLock",
      "type": "Function",
      "technical_level": "function",
      "label": "releaseCaseLock",
      "file": "src/temporal/activities/lock-management.ts",
      "line": 60,
      "importance": "core",
      "description": "Activity: releases PostgreSQL advisory lock with ownership verification.",
      "inferred": false
    },
    {
      "id": "func_updateCaseState",
      "type": "Function",
      "technical_level": "function",
      "label": "updateCaseState",
      "file": "src/temporal/activities/case-management.ts",
      "line": 11,
      "importance": "core",
      "description": "Activity: updates case state in Case Service and publishes SSE event for real-time updates.",
      "inferred": false
    },
    {
      "id": "func_updateDocumentExtractionStatus",
      "type": "Function",
      "technical_level": "function",
      "label": "updateDocumentExtractionStatus",
      "file": "src/temporal/activities/case-management.ts",
      "line": 31,
      "importance": "core",
      "description": "Activity: updates per-document extraction status in Case Service with lifecycle tracking (pending → ocr_in_progress → extraction_in_progress → completed/failed), quality metrics, and metadata.",
      "inferred": false
    },
    {
      "id": "func_fetchBeeduDossiersActivity",
      "type": "Function",
      "technical_level": "function",
      "label": "fetchBeeduDossiersActivity",
      "file": "src/temporal/beedu-activities/fetch-dossiers.ts",
      "line": 20,
      "importance": "core",
      "description": "Activity: calls Beedu client to list dossiers with pagination support.",
      "inferred": false
    },
    {
      "id": "func_fetchBeeduDossiersByCaseCodesActivity",
      "type": "Function",
      "technical_level": "function",
      "label": "fetchBeeduDossiersByCaseCodesActivity",
      "file": "src/temporal/beedu-activities/fetch-dossiers.ts",
      "importance": "core",
      "description": "Activity: fetches specific dossiers by case codes using search API.",
      "inferred": false
    },
    {
      "id": "func_launchExtractionWorkflowActivity",
      "type": "Function",
      "technical_level": "function",
      "label": "launchExtractionWorkflowActivity",
      "file": "src/temporal/beedu-activities/extraction-workflow.ts",
      "importance": "core",
      "description": "Activity: launches case orchestration workflow for a dossier with metadata and webhook configuration.",
      "inferred": false
    },
    {
      "id": "func_uploadOcrPdfsActivity",
      "type": "Function",
      "technical_level": "function",
      "label": "uploadOcrPdfsActivity",
      "file": "src/temporal/activities/ocr-pdf-upload.ts",
      "importance": "core",
      "description": "Activity: uploads OCR result PDFs to Beedu system with dry-run support.",
      "inferred": false
    },
    {
      "id": "func_buildBatchedWebhookPayloadActivity",
      "type": "Function",
      "technical_level": "function",
      "label": "buildBatchedWebhookPayloadActivity",
      "file": "src/temporal/activities/webhooks.ts",
      "importance": "core",
      "description": "Activity: builds batched webhook payload with results from multiple completed documents.",
      "inferred": false
    },
    {
      "id": "func_sendBatchedWebhookSecureActivity",
      "type": "Function",
      "technical_level": "function",
      "label": "sendBatchedWebhookSecureActivity",
      "file": "src/temporal/activities/webhooks.ts",
      "importance": "core",
      "description": "Activity: sends batched webhook with HMAC signature to external endpoint using credentials from environment variables (not logged in Temporal).",
      "inferred": false
    },
    {
      "id": "func_resolveDocumentType",
      "type": "Function",
      "technical_level": "function",
      "label": "resolveDocumentType",
      "file": "src/temporal/utils/document-type.ts",
      "importance": "supporting",
      "description": "Utility: resolves document type (court_dan_su, court_hinh_su) from extraction result metadata or workflow options.",
      "inferred": false
    },
    {
      "id": "func_resolveCaseType",
      "type": "Function",
      "technical_level": "function",
      "label": "resolveCaseType",
      "file": "src/temporal/utils/document-type.ts",
      "importance": "supporting",
      "description": "Utility: resolves case type from extraction result metadata or dossier metadata.",
      "inferred": false
    },
    {
      "id": "endpoint_start_workflow",
      "type": "Endpoint",
      "technical_level": "endpoint",
      "label": "POST /v1/workflows/start",
      "file": "src/routes/workflows.ts",
      "line": 9,
      "importance": "core",
      "entrypoint": true,
      "description": "HTTP endpoint: starts a new case orchestration workflow with validation, idempotency checking, document normalization, and config injection.",
      "inferred": false
    },
    {
      "id": "endpoint_get_workflow_status",
      "type": "Endpoint",
      "technical_level": "endpoint",
      "label": "GET /v1/workflows/:workflow_id",
      "file": "src/routes/workflows.ts",
      "line": 131,
      "importance": "core",
      "entrypoint": true,
      "description": "HTTP endpoint: retrieves workflow status from Temporal with execution details.",
      "inferred": false
    },
    {
      "id": "endpoint_list_workflows",
      "type": "Endpoint",
      "technical_level": "endpoint",
      "label": "GET /v1/workflows",
      "file": "src/routes/workflows.ts",
      "line": 172,
      "importance": "core",
      "entrypoint": true,
      "description": "HTTP endpoint: lists workflows with filtering (case_id, status) and pagination.",
      "inferred": false
    },
    {
      "id": "endpoint_cancel_workflow",
      "type": "Endpoint",
      "technical_level": "endpoint",
      "label": "POST /v1/workflows/:workflow_id/cancel",
      "file": "src/routes/workflows.ts",
      "line": 208,
      "importance": "core",
      "entrypoint": true,
      "description": "HTTP endpoint: sends cancel signal to workflow for graceful cancellation.",
      "inferred": false
    },
    {
      "id": "endpoint_ocr_webhook",
      "type": "Endpoint",
      "technical_level": "endpoint",
      "label": "POST /webhooks/ocr",
      "file": "src/routes/webhooks.ts",
      "line": 13,
      "importance": "core",
      "entrypoint": true,
      "description": "HTTP endpoint: receives OCR completion webhook (CloudEvents), validates HMAC signature, retrieves text from filesystem, enriches data, signals workflow, handles orphan webhooks.",
      "inferred": false
    },
    {
      "id": "endpoint_extraction_webhook",
      "type": "Endpoint",
      "technical_level": "endpoint",
      "label": "POST /webhooks/extraction",
      "file": "src/routes/webhooks.ts",
      "line": 155,
      "importance": "core",
      "entrypoint": true,
      "description": "HTTP endpoint: receives Extraction completion webhook (CloudEvents), validates HMAC signature, signals workflow, handles orphan webhooks.",
      "inferred": false
    },
    {
      "id": "endpoint_health_check",
      "type": "Endpoint",
      "technical_level": "endpoint",
      "label": "GET /health",
      "file": "src/routes/health.ts",
      "line": 11,
      "importance": "core",
      "entrypoint": true,
      "description": "HTTP endpoint: returns service health status with dependency checks (Temporal, Redis, Database).",
      "inferred": false
    },
    {
      "id": "endpoint_readiness_probe",
      "type": "Endpoint",
      "technical_level": "endpoint",
      "label": "GET /ready",
      "file": "src/routes/health.ts",
      "line": 51,
      "importance": "core",
      "entrypoint": true,
      "description": "HTTP endpoint: Kubernetes readiness probe checking critical infrastructure (Temporal, Redis).",
      "inferred": false
    },
    {
      "id": "endpoint_sse_events",
      "type": "Endpoint",
      "technical_level": "endpoint",
      "label": "GET /events",
      "file": "src/routes/events.ts",
      "line": 10,
      "importance": "core",
      "entrypoint": true,
      "description": "HTTP endpoint: Server-Sent Events stream for real-time workflow updates via Redis pub/sub.",
      "inferred": false
    },
    {
      "id": "method_listDossiers",
      "type": "Method",
      "technical_level": "method",
      "label": "listDossiers",
      "file": "src/temporal/clients/generated.ts",
      "importance": "core",
      "description": "API call: GET /main/v1/dossiers/ocr/list to fetch dossiers from Beedu.",
      "inferred": false
    },
    {
      "id": "method_createJob_ocr",
      "type": "Method",
      "technical_level": "method",
      "label": "createJob (OCR)",
      "file": "src/temporal/clients/generated.ts",
      "importance": "core",
      "description": "API call: POST /v1/ocr/jobs to start OCR job.",
      "inferred": false
    },
    {
      "id": "method_createJob_extraction",
      "type": "Method",
      "technical_level": "method",
      "label": "createJob (Extraction)",
      "file": "src/temporal/clients/generated.ts",
      "importance": "core",
      "description": "API call: POST /v1/extract/jobs to start extraction job with V2 template support.",
      "inferred": false
    },
    {
      "id": "method_pushResults",
      "type": "Method",
      "technical_level": "method",
      "label": "pushResults",
      "file": "src/temporal/clients/generated.ts",
      "importance": "core",
      "description": "API call: POST /v1/results/push to send extraction results to Results Service.",
      "inferred": false
    },
    {
      "id": "method_updateCaseState_client",
      "type": "Method",
      "technical_level": "method",
      "label": "updateCaseState (Client)",
      "file": "src/temporal/clients/generated.ts",
      "importance": "core",
      "description": "API call: PATCH /v1/cases/:id/state to update case state in Case Service.",
      "inferred": false
    }
  ],
  "edges": [
    {
      "source": "class_GeneratedBeeduOcrClient",
      "target": "method_listDossiers",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "class_GeneratedCaseServiceClient",
      "target": "concept_case_management",
      "type": "implements",
      "layer": "technical-to-conceptual"
    },
    {
      "source": "class_GeneratedCaseServiceClient",
      "target": "method_updateCaseState_client",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "class_GeneratedExtractionServiceClient",
      "target": "concept_extraction",
      "type": "implements",
      "layer": "technical-to-conceptual"
    },
    {
      "source": "class_GeneratedExtractionServiceClient",
      "target": "method_createJob_extraction",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "class_GeneratedOcrServiceClient",
      "target": "concept_ocr_processing",
      "type": "implements",
      "layer": "technical-to-conceptual"
    },
    {
      "source": "class_GeneratedOcrServiceClient",
      "target": "method_createJob_ocr",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "class_GeneratedResultsServiceClient",
      "target": "concept_results_export",
      "type": "implements",
      "layer": "technical-to-conceptual"
    },
    {
      "source": "class_GeneratedResultsServiceClient",
      "target": "method_pushResults",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "concept_beedu_sync",
      "target": "file_fetch_dossiers_ts",
      "type": "implemented_by",
      "layer": "conceptual-to-technical"
    },
    {
      "source": "concept_case_management",
      "target": "file_case_management_ts",
      "type": "implemented_by",
      "layer": "conceptual-to-technical"
    },
    {
      "source": "concept_document_type_resolution",
      "target": "file_document_type_ts",
      "type": "implemented_by",
      "layer": "conceptual-to-technical"
    },
    {
      "source": "concept_extraction",
      "target": "file_extraction_ts",
      "type": "implemented_by",
      "layer": "conceptual-to-technical"
    },
    {
      "source": "concept_lock_management",
      "target": "file_lock_management_ts",
      "type": "implemented_by",
      "layer": "conceptual-to-technical"
    },
    {
      "source": "concept_ocr_pdf_upload",
      "target": "file_ocr_pdf_upload_ts",
      "type": "implemented_by",
      "layer": "conceptual-to-technical"
    },
    {
      "source": "concept_ocr_processing",
      "target": "file_ocr_ts",
      "type": "implemented_by",
      "layer": "conceptual-to-technical"
    },
    {
      "source": "concept_results_export",
      "target": "file_results_ts",
      "type": "implemented_by",
      "layer": "conceptual-to-technical"
    },
    {
      "source": "concept_review_management",
      "target": "file_review_ts",
      "type": "implemented_by",
      "layer": "conceptual-to-technical"
    },
    {
      "source": "concept_status_tracking",
      "target": "file_case_management_ts",
      "type": "implemented_by",
      "layer": "conceptual-to-technical"
    },
    {
      "source": "concept_webhook_delivery",
      "target": "file_webhooks_activity_ts",
      "type": "implemented_by",
      "layer": "conceptual-to-technical"
    },
    {
      "source": "concept_webhook_delivery",
      "target": "file_webhooks_route_ts",
      "type": "implemented_by",
      "layer": "conceptual-to-technical"
    },
    {
      "source": "endpoint_extraction_webhook",
      "target": "func_CaseOrchestrationWorkflow",
      "type": "signals",
      "layer": "technical"
    },
    {
      "source": "endpoint_ocr_webhook",
      "target": "func_CaseOrchestrationWorkflow",
      "type": "signals",
      "layer": "technical"
    },
    {
      "source": "endpoint_ocr_webhook",
      "target": "func_retrieveOCRResults",
      "type": "calls",
      "layer": "technical"
    },
    {
      "source": "endpoint_start_workflow",
      "target": "func_CaseOrchestrationWorkflow",
      "type": "triggers",
      "layer": "technical"
    },
    {
      "source": "file_case_management_ts",
      "target": "func_updateCaseState",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_case_management_ts",
      "target": "func_updateDocumentExtractionStatus",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_case_orchestration_ts",
      "target": "func_CaseOrchestrationWorkflow",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_case_orchestration_ts",
      "target": "func_checkIfReviewNeeded",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_case_orchestration_ts",
      "target": "func_startAndAwaitExtraction",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_case_orchestration_ts",
      "target": "func_startAndAwaitOcr",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_document_type_ts",
      "target": "func_resolveCaseType",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_document_type_ts",
      "target": "func_resolveDocumentType",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_events_route_ts",
      "target": "endpoint_sse_events",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_extraction_ts",
      "target": "func_startExtractionJob",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_extraction_workflow_ts",
      "target": "func_launchExtractionWorkflowActivity",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_fetch_dossiers_ts",
      "target": "func_fetchBeeduDossiersActivity",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_fetch_dossiers_ts",
      "target": "func_fetchBeeduDossiersByCaseCodesActivity",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_generated_clients_ts",
      "target": "class_GeneratedBeeduOcrClient",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_generated_clients_ts",
      "target": "class_GeneratedCaseServiceClient",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_generated_clients_ts",
      "target": "class_GeneratedExtractionServiceClient",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_generated_clients_ts",
      "target": "class_GeneratedOcrServiceClient",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_generated_clients_ts",
      "target": "class_GeneratedResultsServiceClient",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_health_route_ts",
      "target": "endpoint_health_check",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_health_route_ts",
      "target": "endpoint_readiness_probe",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_index_ts",
      "target": "file_env_loader_ts",
      "type": "imports",
      "layer": "technical"
    },
    {
      "source": "file_index_ts",
      "target": "file_server_ts",
      "type": "imports",
      "layer": "technical"
    },
    {
      "source": "file_index_ts",
      "target": "file_worker_ts",
      "type": "imports",
      "layer": "technical"
    },
    {
      "source": "file_lock_management_ts",
      "target": "func_acquireCaseLock",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_lock_management_ts",
      "target": "func_releaseCaseLock",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_ocr_pdf_upload_ts",
      "target": "func_uploadOcrPdfsActivity",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_ocr_text_retrieval_ts",
      "target": "func_retrieveOCRResults",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_ocr_ts",
      "target": "func_startOCRJob",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_results_ts",
      "target": "func_exportResults",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_results_ts",
      "target": "func_sendResults",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_review_ts",
      "target": "func_notifyReviewRequired",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_server_ts",
      "target": "file_dependencies_ts",
      "type": "imports",
      "layer": "technical"
    },
    {
      "source": "file_server_ts",
      "target": "file_health_route_ts",
      "type": "imports",
      "layer": "technical"
    },
    {
      "source": "file_server_ts",
      "target": "file_validation_ts",
      "type": "imports",
      "layer": "technical"
    },
    {
      "source": "file_server_ts",
      "target": "file_webhooks_route_ts",
      "type": "imports",
      "layer": "technical"
    },
    {
      "source": "file_server_ts",
      "target": "file_workflows_route_ts",
      "type": "imports",
      "layer": "technical"
    },
    {
      "source": "file_sync_dossiers_ts",
      "target": "func_syncExternalDossiersWorkflow",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_typed_client_ts",
      "target": "class_TypedOpenAPIClient",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_webhooks_activity_ts",
      "target": "func_buildBatchedWebhookPayloadActivity",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_webhooks_activity_ts",
      "target": "func_sendBatchedWebhookSecureActivity",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_webhooks_route_ts",
      "target": "endpoint_extraction_webhook",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_webhooks_route_ts",
      "target": "endpoint_ocr_webhook",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_workflows_route_ts",
      "target": "endpoint_cancel_workflow",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_workflows_route_ts",
      "target": "endpoint_get_workflow_status",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_workflows_route_ts",
      "target": "endpoint_list_workflows",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "file_workflows_route_ts",
      "target": "endpoint_start_workflow",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "func_CaseOrchestrationWorkflow",
      "target": "func_acquireCaseLock",
      "type": "calls",
      "layer": "technical"
    },
    {
      "source": "func_CaseOrchestrationWorkflow",
      "target": "func_checkIfReviewNeeded",
      "type": "calls",
      "layer": "technical"
    },
    {
      "source": "func_CaseOrchestrationWorkflow",
      "target": "func_exportResults",
      "type": "calls",
      "layer": "technical"
    },
    {
      "source": "func_CaseOrchestrationWorkflow",
      "target": "func_notifyReviewRequired",
      "type": "calls",
      "layer": "technical"
    },
    {
      "source": "func_CaseOrchestrationWorkflow",
      "target": "func_releaseCaseLock",
      "type": "calls",
      "layer": "technical"
    },
    {
      "source": "func_CaseOrchestrationWorkflow",
      "target": "func_sendResults",
      "type": "calls",
      "layer": "technical"
    },
    {
      "source": "func_CaseOrchestrationWorkflow",
      "target": "func_startAndAwaitExtraction",
      "type": "calls",
      "layer": "technical"
    },
    {
      "source": "func_CaseOrchestrationWorkflow",
      "target": "func_startAndAwaitOcr",
      "type": "calls",
      "layer": "technical"
    },
    {
      "source": "func_CaseOrchestrationWorkflow",
      "target": "func_updateCaseState",
      "type": "calls",
      "layer": "technical"
    },
    {
      "source": "func_exportResults",
      "target": "class_GeneratedResultsServiceClient",
      "type": "uses",
      "layer": "technical"
    },
    {
      "source": "func_exportResults",
      "target": "method_pushResults",
      "type": "calls",
      "layer": "technical"
    },
    {
      "source": "func_fetchBeeduDossiersActivity",
      "target": "method_listDossiers",
      "type": "calls",
      "layer": "technical"
    },
    {
      "source": "func_sendResults",
      "target": "class_GeneratedResultsServiceClient",
      "type": "uses",
      "layer": "technical"
    },
    {
      "source": "func_sendResults",
      "target": "method_pushResults",
      "type": "calls",
      "layer": "technical"
    },
    {
      "source": "func_startAndAwaitExtraction",
      "target": "func_resolveCaseType",
      "type": "calls",
      "layer": "technical"
    },
    {
      "source": "func_startAndAwaitExtraction",
      "target": "func_resolveDocumentType",
      "type": "calls",
      "layer": "technical"
    },
    {
      "source": "func_startAndAwaitExtraction",
      "target": "func_sendResults",
      "type": "calls",
      "layer": "technical"
    },
    {
      "source": "func_startAndAwaitExtraction",
      "target": "func_startExtractionJob",
      "type": "calls",
      "layer": "technical"
    },
    {
      "source": "func_startAndAwaitOcr",
      "target": "func_startOCRJob",
      "type": "calls",
      "layer": "technical"
    },
    {
      "source": "func_startAndAwaitOcr",
      "target": "func_updateDocumentExtractionStatus",
      "type": "calls",
      "layer": "technical"
    },
    {
      "source": "func_startExtractionJob",
      "target": "class_GeneratedExtractionServiceClient",
      "type": "uses",
      "layer": "technical"
    },
    {
      "source": "func_startExtractionJob",
      "target": "method_createJob_extraction",
      "type": "calls",
      "layer": "technical"
    },
    {
      "source": "func_startOCRJob",
      "target": "class_GeneratedOcrServiceClient",
      "type": "uses",
      "layer": "technical"
    },
    {
      "source": "func_startOCRJob",
      "target": "method_createJob_ocr",
      "type": "calls",
      "layer": "technical"
    },
    {
      "source": "func_syncExternalDossiersWorkflow",
      "target": "func_buildBatchedWebhookPayloadActivity",
      "type": "calls",
      "layer": "technical"
    },
    {
      "source": "func_syncExternalDossiersWorkflow",
      "target": "func_fetchBeeduDossiersActivity",
      "type": "calls",
      "layer": "technical"
    },
    {
      "source": "func_syncExternalDossiersWorkflow",
      "target": "func_fetchBeeduDossiersByCaseCodesActivity",
      "type": "calls",
      "layer": "technical"
    },
    {
      "source": "func_syncExternalDossiersWorkflow",
      "target": "func_launchExtractionWorkflowActivity",
      "type": "calls",
      "layer": "technical"
    },
    {
      "source": "func_syncExternalDossiersWorkflow",
      "target": "func_sendBatchedWebhookSecureActivity",
      "type": "calls",
      "layer": "technical"
    },
    {
      "source": "func_syncExternalDossiersWorkflow",
      "target": "func_updateDocumentExtractionStatus",
      "type": "calls",
      "layer": "technical"
    },
    {
      "source": "func_syncExternalDossiersWorkflow",
      "target": "func_uploadOcrPdfsActivity",
      "type": "calls",
      "layer": "technical"
    },
    {
      "source": "func_updateCaseState",
      "target": "class_GeneratedCaseServiceClient",
      "type": "uses",
      "layer": "technical"
    },
    {
      "source": "func_updateCaseState",
      "target": "method_updateCaseState_client",
      "type": "calls",
      "layer": "technical"
    },
    {
      "source": "func_updateDocumentExtractionStatus",
      "target": "class_GeneratedCaseServiceClient",
      "type": "uses",
      "layer": "technical"
    },
    {
      "source": "module_beedu_activities",
      "target": "file_case_operations_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_beedu_activities",
      "target": "file_document_tracking_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_beedu_activities",
      "target": "file_extraction_workflow_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_beedu_activities",
      "target": "file_fetch_dossiers_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_beedu_activities",
      "target": "file_fetch_files_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_beedu_activities",
      "target": "file_store_metadata_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_beedu_activities",
      "target": "file_sync_status_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_beedu_activities",
      "target": "file_upload_file_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_clients",
      "target": "file_generated_clients_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_clients",
      "target": "file_typed_client_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_config",
      "target": "file_database_config_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_config",
      "target": "file_env_loader_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_config",
      "target": "file_redis_config_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_config",
      "target": "file_services_config_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_cron",
      "target": "file_cron_sync_dossiers_sh",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_cron",
      "target": "file_manage_cron_sh",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_middleware",
      "target": "file_dependencies_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_middleware",
      "target": "file_validation_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_routes",
      "target": "file_events_route_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_routes",
      "target": "file_formatted_results_route_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_routes",
      "target": "file_health_route_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_routes",
      "target": "file_review_route_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_routes",
      "target": "file_webhooks_route_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_routes",
      "target": "file_workflows_route_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_temporal_activities",
      "target": "file_case_management_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_temporal_activities",
      "target": "file_extraction_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_temporal_activities",
      "target": "file_job_health_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_temporal_activities",
      "target": "file_lock_management_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_temporal_activities",
      "target": "file_metrics_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_temporal_activities",
      "target": "file_ocr_pdf_upload_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_temporal_activities",
      "target": "file_ocr_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_temporal_activities",
      "target": "file_pdf_verification_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_temporal_activities",
      "target": "file_results_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_temporal_activities",
      "target": "file_review_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_temporal_activities",
      "target": "file_webhooks_activity_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_temporal_workflows",
      "target": "file_case_orchestration_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_temporal_workflows",
      "target": "file_sync_dossiers_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_utils",
      "target": "file_document_type_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_utils",
      "target": "file_filename_filter_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_utils",
      "target": "file_ocr_text_retrieval_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_worker",
      "target": "file_server_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "module_worker",
      "target": "file_worker_ts",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "service_orchestrator",
      "target": "module_beedu_activities",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "service_orchestrator",
      "target": "module_clients",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "service_orchestrator",
      "target": "module_config",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "service_orchestrator",
      "target": "module_cron",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "service_orchestrator",
      "target": "module_middleware",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "service_orchestrator",
      "target": "module_routes",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "service_orchestrator",
      "target": "module_temporal_activities",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "service_orchestrator",
      "target": "module_temporal_workflows",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "service_orchestrator",
      "target": "module_utils",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "service_orchestrator",
      "target": "module_worker",
      "type": "contains",
      "layer": "technical"
    },
    {
      "source": "workflow_case_orchestration",
      "target": "concept_case_management",
      "type": "includes",
      "layer": "workflow-to-conceptual"
    },
    {
      "source": "workflow_case_orchestration",
      "target": "concept_document_type_resolution",
      "type": "includes",
      "layer": "workflow-to-conceptual"
    },
    {
      "source": "workflow_case_orchestration",
      "target": "concept_extraction",
      "type": "includes",
      "layer": "workflow-to-conceptual"
    },
    {
      "source": "workflow_case_orchestration",
      "target": "concept_idempotency",
      "type": "includes",
      "layer": "workflow-to-conceptual"
    },
    {
      "source": "workflow_case_orchestration",
      "target": "concept_lock_management",
      "type": "includes",
      "layer": "workflow-to-conceptual"
    },
    {
      "source": "workflow_case_orchestration",
      "target": "concept_ocr_processing",
      "type": "includes",
      "layer": "workflow-to-conceptual"
    },
    {
      "source": "workflow_case_orchestration",
      "target": "concept_results_export",
      "type": "includes",
      "layer": "workflow-to-conceptual"
    },
    {
      "source": "workflow_case_orchestration",
      "target": "concept_review_management",
      "type": "includes",
      "layer": "workflow-to-conceptual"
    },
    {
      "source": "workflow_case_orchestration",
      "target": "concept_status_tracking",
      "type": "includes",
      "layer": "workflow-to-conceptual"
    },
    {
      "source": "workflow_case_orchestration",
      "target": "func_acquireCaseLock",
      "type": "calls",
      "layer": "workflow-to-technical"
    },
    {
      "source": "workflow_case_orchestration",
      "target": "func_exportResults",
      "type": "calls",
      "layer": "workflow-to-technical"
    },
    {
      "source": "workflow_case_orchestration",
      "target": "func_notifyReviewRequired",
      "type": "calls",
      "layer": "workflow-to-technical"
    },
    {
      "source": "workflow_case_orchestration",
      "target": "func_releaseCaseLock",
      "type": "calls",
      "layer": "workflow-to-technical"
    },
    {
      "source": "workflow_case_orchestration",
      "target": "func_sendResults",
      "type": "calls",
      "layer": "workflow-to-technical"
    },
    {
      "source": "workflow_case_orchestration",
      "target": "func_startExtractionJob",
      "type": "calls",
      "layer": "workflow-to-technical"
    },
    {
      "source": "workflow_case_orchestration",
      "target": "func_startOCRJob",
      "type": "calls",
      "layer": "workflow-to-technical"
    },
    {
      "source": "workflow_case_orchestration",
      "target": "func_updateCaseState",
      "type": "calls",
      "layer": "workflow-to-technical"
    },
    {
      "source": "workflow_case_orchestration",
      "target": "func_updateDocumentExtractionStatus",
      "type": "calls",
      "layer": "workflow-to-technical"
    },
    {
      "source": "workflow_sync_dossiers",
      "target": "concept_beedu_sync",
      "type": "includes",
      "layer": "workflow-to-conceptual"
    },
    {
      "source": "workflow_sync_dossiers",
      "target": "concept_case_management",
      "type": "includes",
      "layer": "workflow-to-conceptual"
    },
    {
      "source": "workflow_sync_dossiers",
      "target": "concept_ocr_pdf_upload",
      "type": "includes",
      "layer": "workflow-to-conceptual"
    },
    {
      "source": "workflow_sync_dossiers",
      "target": "concept_status_tracking",
      "type": "includes",
      "layer": "workflow-to-conceptual"
    },
    {
      "source": "workflow_sync_dossiers",
      "target": "concept_webhook_delivery",
      "type": "includes",
      "layer": "workflow-to-conceptual"
    },
    {
      "source": "workflow_sync_dossiers",
      "target": "func_buildBatchedWebhookPayloadActivity",
      "type": "calls",
      "layer": "workflow-to-technical"
    },
    {
      "source": "workflow_sync_dossiers",
      "target": "func_fetchBeeduDossiersActivity",
      "type": "calls",
      "layer": "workflow-to-technical"
    },
    {
      "source": "workflow_sync_dossiers",
      "target": "func_launchExtractionWorkflowActivity",
      "type": "calls",
      "layer": "workflow-to-technical"
    },
    {
      "source": "workflow_sync_dossiers",
      "target": "func_sendBatchedWebhookSecureActivity",
      "type": "calls",
      "layer": "workflow-to-technical"
    },
    {
      "source": "workflow_sync_dossiers",
      "target": "func_uploadOcrPdfsActivity",
      "type": "calls",
      "layer": "workflow-to-technical"
    },
    {
      "source": "workflow_webhook_handling",
      "target": "concept_ocr_processing",
      "type": "includes",
      "layer": "workflow-to-conceptual"
    },
    {
      "source": "workflow_webhook_handling",
      "target": "concept_webhook_delivery",
      "type": "includes",
      "layer": "workflow-to-conceptual"
    }
  ],
  "layers": {
    "workflow": [
      "workflow_case_orchestration",
      "workflow_sync_dossiers",
      "workflow_webhook_handling"
    ],
    "conceptual": [
      "concept_case_management",
      "concept_ocr_processing",
      "concept_extraction",
      "concept_review_management",
      "concept_results_export",
      "concept_beedu_sync",
      "concept_webhook_delivery",
      "concept_lock_management",
      "concept_idempotency",
      "concept_ocr_pdf_upload",
      "concept_status_tracking",
      "concept_document_type_resolution"
    ],
    "technical": [
      "service_orchestrator",
      "module_temporal_workflows",
      "module_temporal_activities",
      "module_beedu_activities",
      "module_routes",
      "module_middleware",
      "module_config",
      "module_clients",
      "module_utils",
      "module_worker",
      "module_cron",
      "file_case_orchestration_ts",
      "file_sync_dossiers_ts",
      "file_ocr_ts",
      "file_extraction_ts",
      "file_review_ts",
      "file_results_ts",
      "file_lock_management_ts",
      "file_case_management_ts",
      "file_metrics_ts",
      "file_webhooks_activity_ts",
      "file_pdf_verification_ts",
      "file_ocr_pdf_upload_ts",
      "file_job_health_ts",
      "file_fetch_dossiers_ts",
      "file_fetch_files_ts",
      "file_store_metadata_ts",
      "file_sync_status_ts",
      "file_extraction_workflow_ts",
      "file_case_operations_ts",
      "file_upload_file_ts",
      "file_document_tracking_ts",
      "file_workflows_route_ts",
      "file_webhooks_route_ts",
      "file_health_route_ts",
      "file_review_route_ts",
      "file_events_route_ts",
      "file_formatted_results_route_ts",
      "file_validation_ts",
      "file_dependencies_ts",
      "file_database_config_ts",
      "file_redis_config_ts",
      "file_services_config_ts",
      "file_env_loader_ts",
      "file_generated_clients_ts",
      "file_typed_client_ts",
      "file_ocr_text_retrieval_ts",
      "file_document_type_ts",
      "file_filename_filter_ts",
      "file_worker_ts",
      "file_server_ts",
      "file_index_ts",
      "file_cron_sync_dossiers_sh",
      "file_manage_cron_sh",
      "class_GeneratedBeeduOcrClient",
      "class_GeneratedOcrServiceClient",
      "class_GeneratedExtractionServiceClient",
      "class_GeneratedResultsServiceClient",
      "class_GeneratedCaseServiceClient",
      "class_TypedOpenAPIClient",
      "func_CaseOrchestrationWorkflow",
      "func_startAndAwaitOcr",
      "func_startAndAwaitExtraction",
      "func_checkIfReviewNeeded",
      "func_syncExternalDossiersWorkflow",
      "func_startOCRJob",
      "func_retrieveOCRResults",
      "func_startExtractionJob",
      "func_sendResults",
      "func_exportResults",
      "func_notifyReviewRequired",
      "func_acquireCaseLock",
      "func_releaseCaseLock",
      "func_updateCaseState",
      "func_updateDocumentExtractionStatus",
      "func_fetchBeeduDossiersActivity",
      "func_fetchBeeduDossiersByCaseCodesActivity",
      "func_launchExtractionWorkflowActivity",
      "func_uploadOcrPdfsActivity",
      "func_buildBatchedWebhookPayloadActivity",
      "func_sendBatchedWebhookSecureActivity",
      "func_resolveDocumentType",
      "func_resolveCaseType",
      "endpoint_start_workflow",
      "endpoint_get_workflow_status",
      "endpoint_list_workflows",
      "endpoint_cancel_workflow",
      "endpoint_ocr_webhook",
      "endpoint_extraction_webhook",
      "endpoint_health_check",
      "endpoint_readiness_probe",
      "endpoint_sse_events",
      "method_listDossiers",
      "method_createJob_ocr",
      "method_createJob_extraction",
      "method_pushResults",
      "method_updateCaseState_client"
    ]
  }
}